@echo off
if not exist target mkdir target
if not exist target\classes mkdir target\classes


echo compile classes
javac -nowarn -d target\classes -sourcepath jvm -cp "c:\tfs2\plugs\jnifornet\jni4net-0.8.8.0-bin\lib\jni4net.j-0.8.8.0.jar"; "jvm\scriptcs/embedded\ExecuteScriptCs.java" "jvm\scriptcs/embedded\ExecutionManager.java" "jvm\scriptcs/embedded\ScriptModule.java" 
IF %ERRORLEVEL% NEQ 0 goto end


echo ScriptCs.Embedded.j4n.jar 
jar cvf ScriptCs.Embedded.j4n.jar  -C target\classes "scriptcs\embedded\ExecuteScriptCs.class"  -C target\classes "scriptcs\embedded\ExecutionManager.class"  -C target\classes "scriptcs\embedded\ScriptModule.class"  > nul 
IF %ERRORLEVEL% NEQ 0 goto end


echo ScriptCs.Embedded.j4n.dll 
csc /nologo /warn:0 /t:library /out:ScriptCs.Embedded.j4n.dll /recurse:clr\*.cs  /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Embedded.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Contracts.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Core.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Embedded.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Engine.Common.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Engine.Mono.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Engine.Roslyn.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ScriptCs.Hosting.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\System.Collections.Immutable.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\System.Reflection.Metadata.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\WebDriver.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\WebDriver.Support.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Autofac.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Autofac.Integration.Mef.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Common.Logging.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Common.Logging.Core.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\FluentAutomation.Core.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\FluentAutomation.SeleniumWebDriver.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ICSharpCode.NRefactory.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\ICSharpCode.NRefactory.CSharp.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Microsoft.CodeAnalysis.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Microsoft.CodeAnalysis.CSharp.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Microsoft.CodeAnalysis.Desktop.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Microsoft.CodeAnalysis.Scripting.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Microsoft.CodeAnalysis.Scripting.CSharp.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Microsoft.Web.XmlTransform.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Mono.Cecil.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Mono.CSharp.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\Newtonsoft.Json.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\NuGet.Core.dll" /reference:"C:\TFS2\plugs\scriptella\githubsrc\mfyuce\scriptcs\src\ScriptCs.Embedded\bin\Debug\PowerArgs.dll"   /reference:"C:\TFS2\plugs\jnifornet\jni4net-0.8.8.0-bin\lib\jni4net.n-0.8.8.0.dll"
IF %ERRORLEVEL% NEQ 0 goto end


:end
